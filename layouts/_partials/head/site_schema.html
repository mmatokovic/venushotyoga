{{ $org_name := .Site.Params.orgName -}}
{{ if .IsHome -}}
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@graph": [
            {
                "@type": "WebSite",
                "@id": "{{ .Site.BaseURL }}/#website",
                "name": "{{ $org_name }}",
                "url": "{{ .Site.BaseURL }}/",
                "publisher": {
                    "@id": "{{ .Site.BaseURL }}/#organization"
                },
                "description": "{{ .Site.Params.description }}",
                "thumbnailUrl": "{{ .Site.Params.Logo | absURL }}",
                "license": "{{ .Site.Params.Copyright }}"
            },
            {
                "@type": "Organization",
                "@id": "{{ .Site.BaseURL }}/#organization",
                "name": "{{ $org_name }}",
                "url": "{{ .Site.BaseURL }}/",
                "logo": "{{ .Site.BaseURL }}/favicon.png",
                "sameAs": [{{- with site.Data.links.facebook }}"{{ . }}"{{ end }}{{- with site.Data.links.instagram }}{{ if site.Data.links.facebook }}, {{ end }}"{{ . }}"{{ end }}]
            },
            {
                "@type": "LocalBusiness",
                "@id": "{{ .Site.BaseURL }}/#localbusiness",
                "name": "{{ $org_name }}",
                "url": "{{ .Site.BaseURL }}/",
                "logo": "{{ .Site.BaseURL }}/favicon.png",
                "sameAs": [{{- with site.Data.links.facebook }}"{{ . }}"{{ end }}{{- with site.Data.links.instagram }}{{ if site.Data.links.facebook }}, {{ end }}"{{ . }}"{{ end }}],
                {{- with site.Data.links.tel }}
                "telephone": "{{ . }}",
                {{- end }}
                {{- with site.Data.openingHours }}
                "openingHoursSpecification": [
                    {{- range $index, $ohs := . }}
                    {{- if $index }},{{ end }}
                    {
                        "@type": "OpeningHoursSpecification",
                        "dayOfWeek": [
                            {{- range $i, $day := $ohs.days }}
                            {{- if $i }},{{ end }}"{{ $day }}"
                            {{- end }}
                        ],
                        "opens": "{{ $ohs.opens }}",
                        "closes": "{{ $ohs.closes }}"
                    }
                    {{- end }}
                ],
                {{- end }}
                {{- with site.Data.location }}
                "address": {
                "@type": "PostalAddress",
                "streetAddress": "{{ .address.streetAddress }}",
                "addressLocality": "{{ .address.addressLocality }}",
                "postalCode": "{{ .address.postalCode }}",
                "addressCountry": "{{ .address.addressCountry }}"
                },
                "geo": {
                "@type": "GeoCoordinates",
                "latitude": {{ .geo.latitude }},
                "longitude": {{ .geo.longitude }}
                }
                {{- end }}
            }
        ]
    }
</script>
{{ else if .IsPage -}}
{{ $author :=  or (.Params.author) (.Site.Author.name) -}}
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "{{ .Section }}",
        "name": "{{ $org_name }}",
        "headline": "{{ .Title | safeJS }}",
        "description": "{{ if .Description }}{{ .Description | safeJS }}{{ else }}{{if .IsPage}}{{ .Summary  }}{{ end }}{{ end }}",
        "inLanguage": {{ .Site.LanguageCode | default "en-us" }},
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ .Permalink }}"
        },
        "author" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "creator" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "{{ $author }}"
        },
        "copyrightHolder" : "{{ $org_name }}",
        "copyrightYear" : "{{ .Date.Format "2006" }}",
        "dateCreated": "{{ .Date.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "datePublished": "{{ .PublishDate.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
        "publisher":{
            "@type":"Organization",
            "name": "{{ $org_name }}",
            "url": "{{ .Site.BaseURL }}",
            "logo": {
                "@type": "ImageObject",
                "url": "{{ .Site.Params.logo | absURL }}",
                "width":"32",
                "height":"32"
            }
        },
        "image": {{ if .Params.images }}[{{ range $i, $e := .Params.images }}{{ if $i }}, {{ end }}{{ $e | absURL }}{{ end }}]{{ else}}{{.Site.Params.logo | absURL }}{{ end }},
        "url" : "{{ .Permalink }}",
        "wordCount" : "{{ .WordCount }}",
        "genre" : [ {{ range $index, $tag := .Params.tags }}{{ if $index }}, {{ end }}"{{ $tag }}" {{ end }}],
        "keywords" : [ {{ range $index, $keyword := .Params.keywords }}{{ if $index }}, {{ end }}"{{ $keyword }}" {{ end }}]
    }
</script>
{{ end -}}